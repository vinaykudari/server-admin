import L from"path";import P from"express";import{Router as x}from"express";import c from"fs/promises";import s from"path";import{fileURLToPath as R}from"url";var i=process.env.WORKSPACE_ROOT??"/root/.openclaw/workspace",p=s.join(i,"RUNBOOK.md"),m=s.join(i,"TASKS.md"),h=R(import.meta.url),k=s.dirname(h),a=process.env.CLIENT_DIST_PATH??s.resolve(k,"../../client/dist");var u=async(o,t)=>{let e=await c.stat(t),n=await c.readFile(t,"utf-8");return{name:o,path:t,content:n,updatedAt:e.mtime.toISOString()}},g=async()=>{let[o,t]=await Promise.all([u("RUNBOOK",p),u("TASKS",m)]);return{runbook:o,tasks:t}};var l=x();l.get("/logs",async(o,t)=>{try{let e=await g();t.json(e)}catch(e){let n=e instanceof Error?e.message:"Unknown error";t.status(500).json({error:n})}});var d=l;var r=P(),f=Number(process.env.PORT??4175);r.get("/api/health",(o,t)=>{t.json({status:"ok"})});r.use("/api",d);r.use(P.static(a));r.get("*",(o,t)=>{t.sendFile(L.join(a,"index.html"))});r.listen(f,()=>{console.log(`Server admin app listening on port ${f}`)});
//# sourceMappingURL=index.js.map